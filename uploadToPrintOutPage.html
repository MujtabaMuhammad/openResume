<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href= "https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.0.279/pdf.min.js"></script>
   

<style>
#pdf-conainer{
      width:100%;
      height:500px;
      overflow: auto;
      border: 1px solid #ccc
}
</style>

</head>
<body>
     <div class="row" style= "height:80px;"></div>
     <div class="container text-center">
     <h1>Open</h1><h1>resume</h1>
     </div>
     
      <div class="row" style= "height:160px;"></div>
  

	
	<div class="container">
        <div class="row justify-content-center"> 
        <class class="col-4">
	<label for="myFile">Please upload resume over here (as a .txt file only)</label>
        <form action="/action_page.php">
  	
      
      <input type="file" id="file-input" accept = "application/pdf"/>
      <div id="pdf-container"></div>
	</form>
        
        <!--Creation of a box where the pdf content will be displayed-->
        </class>
        </div>
        </div>
    
     
     <script>
         pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.0.279/pdf.worker.min.js';


    const files = document.getElementById('file-input');
    files.addEventListener('change', handleFiles);

    function handleFiles(event){

         const fileOne = event.target.files[0];
         const fileReader = new FileReader();
        
         fileReader.onload = function(){
           const typedArray = new Uint8Array(this.result);
           const loadingTask = pdfjsLib.getDocument(typedArray);
   
   
           loadingTask.promise.then(function(pdf){
                const pdfContainer = document.getElementById('pdf-container');
                pdfContainer.innerHTML = '';
   
                for(let i = 1; i<=pdf.numPages; i++){
                        extractText(pdf,i); 
                }
                }).catch(function(error){
                                console.log("Error : " + error.message); });
           };
          fileReader.readAsArrayBuffer(fileOne);
    }


        function extractText(pdf, pageNumber){
            pdf.getPage(pageNumber).then(function(page){
                   return page.getTextContent();})
                   
                   .then(function(textContent){

                  const pdfContainer = document.getElementById('pdf-container');
                  const textDiv = document.createElement('div');
                  textDiv.style.margin = '10px 0'; //why the 0 here?


                  textContent.items.forEach(function(item){
                        const span = document.createElement('span');
                        span.textContent = item.str + ' ';
                        textDiv.appendChild(span);
                  });
                  pdfContainer.appendChild(textDiv);      
        }).catch(function(error){
            console.log(error.message);
        });
      }

    </script>

</body>


</html>

